(this["webpackJsonpsales-tracker"]=this["webpackJsonpsales-tracker"]||[]).push([[53],{1339:function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var n=a(3),r=a(25),o=a(128),c=a.n(o),s=a(125),i=a(322),l=a(1238),u=a(39),d=a(1357),b=a(0),m=["links","activeLast"];function j(e){var t=e.links,a=e.activeLast,o=void 0!==a&&a,c=Object(r.a)(e,m),l=t[t.length-1].name,u=t.map((function(e){return Object(b.jsx)(p,{link:e},e.name)})),j=t.map((function(e){return Object(b.jsx)("div",{children:e.name!==l?Object(b.jsx)(p,{link:e}):Object(b.jsx)(i.a,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:l})},e.name)}));return Object(b.jsx)(d.a,Object(n.a)(Object(n.a)({separator:Object(b.jsx)(s.a,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})},c),{},{children:o?u:j}))}function p(e){var t=e.link,a=t.href,n=t.name,r=t.icon;return Object(b.jsxs)(l.a,{variant:"body2",component:u.b,to:a||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[r&&Object(b.jsx)(s.a,{sx:{mr:1,"& svg":{width:20,height:20}},children:r}),n]},n)}var h=["links","action","heading","moreLink","sx"];function v(e){var t=e.links,a=e.action,o=e.heading,u=e.moreLink,d=void 0===u?[]:u,m=e.sx,p=Object(r.a)(e,h);return Object(b.jsxs)(s.a,{sx:Object(n.a)({mb:5},m),children:[Object(b.jsxs)(s.a,{sx:{display:"flex",alignItems:"center"},children:[Object(b.jsxs)(s.a,{sx:{flexGrow:1},children:[Object(b.jsx)(i.a,{variant:"h4",gutterBottom:!0,children:o}),Object(b.jsx)(j,Object(n.a)({links:t},p))]}),a&&Object(b.jsx)(s.a,{sx:{flexShrink:0},children:a})]}),Object(b.jsx)(s.a,{sx:{mt:2},children:c()(d)?Object(b.jsx)(l.a,{href:d,target:"_blank",rel:"noopener",variant:"body2",children:d}):d.map((function(e){return Object(b.jsx)(l.a,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)}))})]})}},1357:function(e,t,a){"use strict";var n=a(21),r=a(11),o=a(4),c=a(2),s=a(5),i=a(1),l=(a(206),a(7),a(8)),u=a(149),d=a(6),b=a(14),m=a(322),j=a(47),p=a(45),h=a(0),v=Object(p.a)(Object(h.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz"),O=a(645),x=Object(d.a)(O.a,{skipSx:!0})((function(e){var t=e.theme;return Object(c.a)({display:"flex",marginLeft:"calc(".concat(t.spacing(1)," * 0.5)"),marginRight:"calc(".concat(t.spacing(1)," * 0.5)")},"light"===t.palette.mode?{backgroundColor:t.palette.grey[100],color:t.palette.grey[700]}:{backgroundColor:t.palette.grey[700],color:t.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":Object(c.a)({},"light"===t.palette.mode?{backgroundColor:t.palette.grey[200]}:{backgroundColor:t.palette.grey[600]}),"&:active":Object(c.a)({boxShadow:t.shadows[0]},"light"===t.palette.mode?{backgroundColor:Object(j.c)(t.palette.grey[200],.12)}:{backgroundColor:Object(j.c)(t.palette.grey[600],.12)})})})),f=Object(d.a)(v)({width:24,height:16});var g=function(e){var t=e;return Object(h.jsx)("li",{children:Object(h.jsx)(x,Object(c.a)({focusRipple:!0},e,{ownerState:t,children:Object(h.jsx)(f,{ownerState:t})}))})},w=a(87),y=a(88);function C(e){return Object(w.a)("MuiBreadcrumbs",e)}var T=Object(y.a)("MuiBreadcrumbs",["root","ol","li","separator"]),k=["children","className","component","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],I=Object(d.a)(m.a,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:function(e,t){return[Object(o.a)({},"& .".concat(T.li),t.li),t.root]}})({}),N=Object(d.a)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:function(e,t){return t.ol}})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),S=Object(d.a)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:function(e,t){return t.separator}})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function P(e,t,a,n){return e.reduce((function(r,o,c){return c<e.length-1?r=r.concat(o,Object(h.jsx)(S,{"aria-hidden":!0,className:t,ownerState:n,children:a},"separator-".concat(c))):r.push(o),r}),[])}var A=i.forwardRef((function(e,t){var a=Object(b.a)({props:e,name:"MuiBreadcrumbs"}),o=a.children,d=a.className,m=a.component,j=void 0===m?"nav":m,p=a.expandText,v=void 0===p?"Show path":p,O=a.itemsAfterCollapse,x=void 0===O?1:O,f=a.itemsBeforeCollapse,w=void 0===f?1:f,y=a.maxItems,T=void 0===y?8:y,S=a.separator,A=void 0===S?"/":S,D=Object(s.a)(a,k),M=i.useState(!1),B=Object(r.a)(M,2),L=B[0],R=B[1],q=Object(c.a)({},a,{component:j,expanded:L,expandText:v,itemsAfterCollapse:x,itemsBeforeCollapse:w,maxItems:T,separator:A}),E=function(e){var t=e.classes;return Object(u.a)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},C,t)}(q),G=i.useRef(null),_=i.Children.toArray(o).filter((function(e){return i.isValidElement(e)})).map((function(e,t){return Object(h.jsx)("li",{className:E.li,children:e},"child-".concat(t))}));return Object(h.jsx)(I,Object(c.a)({ref:t,component:j,color:"text.secondary",className:Object(l.a)(E.root,d),ownerState:q},D,{children:Object(h.jsx)(N,{className:E.ol,ref:G,ownerState:q,children:P(L||T&&_.length<=T?_:function(e){return w+x>=e.length?e:[].concat(Object(n.a)(e.slice(0,w)),[Object(h.jsx)(g,{"aria-label":v,onClick:function(){R(!0);var e=G.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis")],Object(n.a)(e.slice(e.length-x,e.length)))}(_),E.separator,A,q)})}))}));t.a=A},2090:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return z}));var n=a(29),r=a(11),o=a(17),c=a.n(o),s=a(1),i=a(35),l=a(1318),u=a(23),d=a(434),b=a(28),m=a(59),j=a(424),p=a(1339),h=a(3),v=a(244),O=a(246),x=a(34),f=a(426),g=a(6),w=a(1335),y=a(100),C=a.n(y),T=a(322),k=a(1314),I=a(1334),N=a(1223),S=a(125),P=a(1242),A=a(1428),D=a.n(A),M=a(22),B=a(207),L=a(0),R=["UnPaid","Paid","Over Due","Cancelled"],q=[{group:"Payment",classify:["Card","Check","Cash"]}],E=[{group:"Duration",classify:[1,2,3]}],G=Object(g.a)(T.a)((function(e){var t=e.theme;return Object(h.a)(Object(h.a)({},t.typography.subtitle2),{},{color:t.palette.text.secondary,marginBottom:t.spacing(1)})}));function _(e){var t=e.isEdit,a=e.currentProduct,r=Object(i.g)(),o=Object(O.b)().enqueueSnackbar,l=v.b().shape({customerName:v.d().required("Customer Name is required"),invoiceId:v.d().required("invoice Id is required"),customerPhone:v.d().required("customer Phone is required"),customerAddress:v.d().required("Customer Address is required")}),u=Object(s.useMemo)((function(){return{_id:(null===a||void 0===a?void 0:a._id)||"",invoiceId:(null===a||void 0===a?void 0:a.invoiceId)||"",customerName:(null===a||void 0===a?void 0:a.customerName)||"",customerPhone:(null===a||void 0===a?void 0:a.customerPhone)||"",invoiceDate:(null===a||void 0===a?void 0:a.invoiceDate)||Date.now(),customerAddress:(null===a||void 0===a?void 0:a.customerAddress)||"",userId:(null===a||void 0===a?void 0:a.userId)||"",vatOne:(null===a||void 0===a?void 0:a.vatOne)||5,vatTwo:(null===a||void 0===a?void 0:a.vatTwo)||10,amountOne:(null===a||void 0===a?void 0:a.amountOne)||"",amountTwo:(null===a||void 0===a?void 0:a.amountTwo)||"",totalOne:(null===a||void 0===a?void 0:a.totalOne)||0,totalTwo:(null===a||void 0===a?void 0:a.totalTwo)||0,grandTotal:(null===a||void 0===a?void 0:a.grandTotal)||0,paidStatus:(null===a||void 0===a?void 0:a.paidStatus)||R[0],due:(null===a||void 0===a?void 0:a.due)||E[0].classify[0],paymentType:(null===a||void 0===a?void 0:a.paymentType)||q[0].classify[0]}}),[a]),d=Object(x.f)({resolver:Object(f.a)(l),defaultValues:u}),m=d.reset,j=d.watch,p=d.setValue,h=d.getValues,g=d.handleSubmit,y=d.formState.isSubmitting,A=j();Object(s.useEffect)((function(){t&&a&&m(u),t||m(u)}),[t,a]);var _=function(){var e=Object(n.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===A._id&&delete A._id,0!==A.grandTotal){e.next=5;break}o("Please Enter the amount",{variant:"error"}),e.next=15;break;case 5:return e.prev=5,e.next=8,new Promise((function(e){return setTimeout(e,500)}));case 8:return e.next=10,C.a.post("".concat(M.b,"invoice/save"),A).then((function(e){console.log(e),1===e.data.status?(m(),o(t?"Update success!":"Create success!"),r(b.b.eCommerce.list)):o("Invoice Id already exist",{variant:"error"})}),(function(e){console.log(e)}));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(n.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C.a.post("".concat(M.b,"customer/customerDetails"),{phone:t}).then((function(e){console.log("----",e.data),1===e.data.status?(p("customerName",e.data.response.name),p("customerAddress",e.data.response.address),p("userId",e.data.response._id)):(p("userId",""),p("customerName",""),p("customerAddress",""))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(L.jsx)(B.a,{methods:d,onSubmit:g(_),children:Object(L.jsxs)(k.a,{container:!0,spacing:3,children:[Object(L.jsx)(k.a,{item:!0,xs:12,md:8,children:Object(L.jsxs)(I.a,{sx:{p:4},children:[Object(L.jsx)(G,{children:"Invoice Details"}),Object(L.jsxs)(N.a,{spacing:3,children:[Object(L.jsxs)(S.a,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[Object(L.jsx)(B.i,{name:"invoiceId",label:"Invoice"}),Object(L.jsx)(B.c,{name:"invoiceDate",label:"InvoiceDate",value:h("invoiceDate"),onChange:function(e){console.log("onChange",e),p(D()(Date.now()).format("DD/MM/YYYY"))}}),Object(L.jsx)(B.i,{name:"customerPhone",label:"Customer Phone",onBlur:function(e){z(h("customerPhone"))}}),Object(L.jsx)(B.i,{name:"customerName",label:"Customer Name"}),Object(L.jsx)(B.i,{name:"customerAddress",label:"Customer Address"})]}),Object(L.jsx)(G,{children:"Amount Details"}),Object(L.jsxs)(S.a,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"}},children:[Object(L.jsx)(B.i,{name:"amountOne",label:"Amount",placeholder:"0.00",value:0===h("amountOne")?"":h("amountOne"),onChange:function(e){p("amountOne",Number(e.target.value)),p("totalOne",Number(Number(e.target.value))+Number(Number(e.target.value)*(h("vatOne")/100))),p("grandTotal",Number(h("totalOne")).toFixed(2)+Number(h("totalTwo")).toFixed(2))},InputLabelProps:{shrink:!0},InputProps:{startAdornment:Object(L.jsx)(P.a,{position:"start",children:"\u20ac"}),type:"number"}}),Object(L.jsx)(B.i,{name:"vatOne",value:"".concat(h("vatOne"),"%"),label:"Vat",disabled:!0}),Object(L.jsx)(B.i,{name:"totalOne",label:"Total",placeholder:"0.00",disabled:!0,value:0===h("totalOne")?"":h("totalOne"),onChange:function(e){return p("totalOne",Number(e.target.value))},InputLabelProps:{shrink:!0},InputProps:{startAdornment:Object(L.jsx)(P.a,{position:"start",children:"\u20ac"}),type:"number"}})]}),Object(L.jsxs)(S.a,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"}},children:[Object(L.jsx)(B.i,{name:"amountTwo",label:"Amount",placeholder:"0.00",value:0===h("amountTwo")?"":h("amountTwo"),onChange:function(e){p("amountTwo",Number(e.target.value)),p("totalTwo",Number(Number(e.target.value))+Number(Number(e.target.value)*(h("vatTwo")/100))),p("grandTotal",h("totalOne")+h("totalTwo"))},InputLabelProps:{shrink:!0},InputProps:{startAdornment:Object(L.jsx)(P.a,{position:"start",children:"\u20ac"}),type:"number"}}),Object(L.jsx)(B.i,{name:"vatTwo",value:"".concat(h("vatTwo"),"%"),label:"Vat",disabled:!0}),Object(L.jsx)(B.i,{name:"totalTwo",label:"Total",placeholder:"0.00",disabled:!0,value:0===h("totalTwo")?"":h("totalTwo"),onChange:function(e){return p("totalTwo",Number(e.target.value))},InputLabelProps:{shrink:!0},InputProps:{startAdornment:Object(L.jsx)(P.a,{position:"start",children:"\u20ac"}),type:"number"}})]})]})]})}),Object(L.jsx)(k.a,{item:!0,xs:12,md:4,children:Object(L.jsx)(N.a,{spacing:3,children:Object(L.jsx)(I.a,{sx:{p:3},children:Object(L.jsxs)(N.a,{spacing:3,mt:2,children:[Object(L.jsx)(B.g,{name:"paymentType",label:"paymentType",children:q.map((function(e){return Object(L.jsx)("optgroup",{label:e.group,children:e.classify.map((function(e){return Object(L.jsx)("option",{value:e,children:e},e)}))},e.group)}))}),Object(L.jsx)(B.g,{name:"due",label:"Duration",children:E.map((function(e){return Object(L.jsx)("optgroup",{label:e.group,children:e.classify.map((function(e){return Object(L.jsxs)("option",{value:e,children:[e," Month"]},e)}))},e.group)}))}),Object(L.jsxs)("div",{children:[Object(L.jsx)(G,{children:"Status"}),Object(L.jsx)(B.f,{name:"paidStatus",options:R,sx:{"& .MuiFormControlLabel-root":{mr:4}}})]}),Object(L.jsx)(T.a,{variant:"subtitle2",sx:{color:"text.secondary"},children:"Grand Total"}),Object(L.jsxs)(T.a,{variant:"body2",sx:{color:"text.secondary",fontSize:24},children:["\u20ac ",(A.totalOne+A.totalTwo).toFixed(2)]}),Object(L.jsx)(w.a,{type:"submit",variant:"contained",size:"large",loading:y,children:t?"Save Changes":"Create invoice"})]})})})})]})})}function z(){var e=Object(m.a)().themeStretch,t=(Object(u.d)(),Object(i.f)().pathname),a=Object(i.h)().name,o=(Object(u.e)((function(e){return e.product})).products,t.includes("edit")),h=Object(s.useState)({}),v=Object(r.a)(h,2),O=v[0],x=v[1];return Object(s.useEffect)(Object(n.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.l)(a);case 2:t=e.sent,x(t);case 4:case"end":return e.stop()}}),e)}))),[]),Object(L.jsx)(j.a,{title:"Ecommerce: Create a new product",children:Object(L.jsxs)(l.a,{maxWidth:!e&&"lg",children:[Object(L.jsx)(p.a,{heading:o?"Edit Invoice":"Create a new Invoice",links:[{name:"Dashboard",href:b.b.root},{name:"Invoice",href:b.b.eCommerce.root},{name:o?"".concat(O.invoiceId):"New "}]}),Object(L.jsx)(_,{isEdit:o,currentProduct:O})]})})}}}]);
//# sourceMappingURL=53.fe00c266.chunk.js.map