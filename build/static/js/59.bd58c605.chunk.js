(this["webpackJsonpsales-tracker"]=this["webpackJsonpsales-tracker"]||[]).push([[59],{1429:function(t,e,a){"use strict";a.d(e,"b",(function(){return x})),a.d(e,"a",(function(){return v})),a.d(e,"c",(function(){return m})),a.d(e,"d",(function(){return P}));var c=a(29),n=a(3),r=a(21),i=a(17),o=a.n(i),u=a(96),s=a(435),l=a.n(s),h=a(442),d=a.n(h),p=a(100),b=a.n(p),j=a(23),f=a(22),O=Object(u.b)({name:"purchase",initialState:{isLoading:!1,error:null,purchases:[],purchase:null,sortBy:null,filters:{gender:[],category:"All",colors:[],priceRange:"",rating:""},checkout:{activeStep:0,cart:[],subtotal:0,total:0,discount:0,shipping:0,billing:null}},reducers:{startLoading:function(t){t.isLoading=!0},hasError:function(t,e){t.isLoading=!1,t.error=e.payload},getpurchasesSuccess:function(t,e){t.isLoading=!1,t.purchases=e.payload},getpurchaseSuccess:function(t,e){t.isLoading=!1,t.purchase=e.payload},sortBypurchases:function(t,e){t.sortBy=e.payload},filterpurchases:function(t,e){t.filters.gender=e.payload.gender,t.filters.category=e.payload.category,t.filters.colors=e.payload.colors,t.filters.priceRange=e.payload.priceRange,t.filters.rating=e.payload.rating},getCart:function(t,e){var a=e.payload,c=l()(a.map((function(t){return t.price*t.quantity}))),n=0===a.length?0:t.checkout.discount,r=0===a.length?0:t.checkout.shipping,i=0===a.length?null:t.checkout.billing;t.checkout.cart=a,t.checkout.discount=n,t.checkout.shipping=r,t.checkout.billing=i,t.checkout.subtotal=c,t.checkout.total=c-n},addCart:function(t,e){var a=e.payload,c=0===t.checkout.cart.length;t.checkout.cart=c?[].concat(Object(r.a)(t.checkout.cart),[a]):t.checkout.cart.map((function(t){return t.id===a.id?Object(n.a)(Object(n.a)({},t),{},{quantity:t.quantity+1}):t})),t.checkout.cart=d()([].concat(Object(r.a)(t.checkout.cart),[a]),"id")},deleteCart:function(t,e){var a=t.checkout.cart.filter((function(t){return t.id!==e.payload}));t.checkout.cart=a},resetCart:function(t){t.checkout.activeStep=0,t.checkout.cart=[],t.checkout.total=0,t.checkout.subtotal=0,t.checkout.discount=0,t.checkout.shipping=0,t.checkout.billing=null},onBackStep:function(t){t.checkout.activeStep-=1},onNextStep:function(t){t.checkout.activeStep+=1},onGotoStep:function(t,e){var a=e.payload;t.checkout.activeStep=a},increaseQuantity:function(t,e){var a=e.payload,c=t.checkout.cart.map((function(t){return t.id===a?Object(n.a)(Object(n.a)({},t),{},{quantity:t.quantity+1}):t}));t.checkout.cart=c},decreaseQuantity:function(t,e){var a=e.payload,c=t.checkout.cart.map((function(t){return t.id===a?Object(n.a)(Object(n.a)({},t),{},{quantity:t.quantity-1}):t}));t.checkout.cart=c},createBilling:function(t,e){t.checkout.billing=e.payload},applyDiscount:function(t,e){var a=e.payload;t.checkout.discount=a,t.checkout.total=t.checkout.subtotal-a},applyShipping:function(t,e){var a=e.payload;t.checkout.shipping=a,t.checkout.total=t.checkout.subtotal-t.checkout.discount+a}}}),g=(O.reducer,O.actions);g.getCart,g.addCart,g.resetCart,g.onGotoStep,g.onBackStep,g.onNextStep,g.deleteCart,g.createBilling,g.applyShipping,g.applyDiscount,g.increaseQuantity,g.decreaseQuantity,g.sortBypurchases,g.filterpurchases;function x(t,e,a,c,n){return k.apply(this,arguments)}function k(){return(k=Object(c.a)(o.a.mark((function t(e,a,c,n,r){var i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.post("".concat(f.b,"purchase/list"),{skip:e,limit:a,search:c,from:n,to:r});case 3:return i=t.sent,t.abrupt("return",i.data.response);case 7:t.prev=7,t.t0=t.catch(0),Object(j.a)(O.actions.hasError(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function v(){return y.apply(this,arguments)}function y(){return(y=Object(c.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.post("".concat(f.b,"dealers/getdealersList"),{});case 3:return e=t.sent,t.abrupt("return",e.data.response);case 7:t.prev=7,t.t0=t.catch(0),Object(j.a)(O.actions.hasError(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function m(t){return S.apply(this,arguments)}function S(){return(S=Object(c.a)(o.a.mark((function t(e){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.post("".concat(f.b,"purchase/Details"),{_id:e});case 3:return a=t.sent,t.abrupt("return",a.data.response);case 7:t.prev=7,t.t0=t.catch(0),Object(j.a)(O.actions.hasError(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function P(t,e){return w.apply(this,arguments)}function w(){return(w=Object(c.a)(o.a.mark((function t(e,a){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.post("".concat(f.b,"purchase/save"),{paidStatus:a,_id:e});case 3:return c=t.sent,t.abrupt("return",c.data.response);case 7:t.prev=7,t.t0=t.catch(0),Object(j.a)(O.actions.hasError(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}},2045:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return T}));var c=a(29),n=a(11),r=a(17),i=a.n(r),o=a(1),u=a(39),s=a(52),l=a(1318),h=a(1236),d=a(1334),p=a(1223),b=a(1290),j=a(2095),f=a(2096),O=a(2100),g=a(2098),x=a(2099),k=a(1310),v=a(125),y=a(2087),m=a(23),S=a(1429),P=a(1343),w=a(243),D=a(28),C=a(59),R=a(424),B=(a(425),a(171)),L=a(1352),q=a(1339),I=a(26),E=a(1441),N=a(1525),_=a(1526),Q=a(0),U=[{id:"purchaseId",label:"PurchaseId",alignRight:!1},{id:"dateOfPurchase",label:"Create at",alignRight:!1},{id:"company",label:"Seller Name",alignRight:!1},{id:"phone",label:"Seller Phone",alignRight:!1},{id:"dueMonth",label:"Last Due",alignRight:!1},{id:"amount",label:"Amount",alignRight:!1},{id:"paidAmount",label:"Paid",alignRight:!1},{id:"balance",label:"Balance",alignRight:!1},{id:"status",label:"Status",alignRight:!1},{id:""}];function T(){var t=Object(C.a)().themeStretch,e=Object(s.a)(),a=(e.palette.mode,Object(m.d)(),Object(o.useState)([])),r=Object(n.a)(a,2),T=r[0],A=r[1],W=Object(o.useState)(0),G=Object(n.a)(W,2),J=G[0],F=G[1],M=Object(o.useState)("asc"),z=Object(n.a)(M,2),H=z[0],K=z[1],V=Object(o.useState)([]),X=Object(n.a)(V,2),Y=X[0],Z=X[1],$=Object(o.useState)(""),tt=Object(n.a)($,2),et=tt[0],at=tt[1],ct=Object(o.useState)(10),nt=Object(n.a)(ct,2),rt=nt[0],it=nt[1],ot=Object(o.useState)(""),ut=Object(n.a)(ot,2),st=ut[0],lt=(ut[1],Object(o.useState)(0)),ht=Object(n.a)(lt,2),dt=ht[0],pt=ht[1],bt=Object(o.useState)(null),jt=Object(n.a)(bt,2),ft=jt[0],Ot=jt[1],gt=Object(o.useState)(null),xt=Object(n.a)(gt,2),kt=xt[0],vt=xt[1],yt=Object(o.useState)(null),mt=Object(n.a)(yt,2),St=mt[0],Pt=(mt[1],Object(o.useState)(1)),wt=Object(n.a)(Pt,2),Dt=(wt[0],wt[1],Object(o.useState)([])),Ct=Object(n.a)(Dt,2),Rt=(Ct[0],Ct[1],Object(_.a)("all")),Bt=(Rt.currentTab,Rt.onChangeTab,Object(o.useState)()),Lt=Object(n.a)(Bt,2),qt=Lt[0],It=Lt[1];Boolean(St);Object(o.useEffect)((function(){console.log("Do something after counter has changed"),_t()}),[rt,J,et,ft,kt]);var Et=function(){var t=Object(c.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e.target.value),it(parseInt(e.target.value,10)),F(0);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Nt=function(){var t=Object(c.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:at(e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_t=function(){var t=Object(c.a)(i.a.mark((function t(e){var a,c,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=J*rt,c=rt,console.log("page",J),console.log("skip",a),console.log("limit",c),console.log("startDate,endDate",ft,kt),t.next=8,Object(S.b)(a,c,et,ft,kt);case 8:(n=t.sent)&&(A(n.data),pt(n.count),It(n.totalDocData));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Qt=!T.length&&Boolean(!et),Ut=!T.length&&Boolean(et),Tt=function(t){if(qt&&qt.length>0){var e=qt.filter((function(e){return e._id===t}));return e[0]?e[0].total:0}},At=function(t){if(qt&&qt.length>0){var e=qt.filter((function(e){return e._id===t}));return e[0]?e[0].percentage:0}},Wt=function(t){if(qt&&qt.length>0){var e=qt.filter((function(e){return e._id===t}));return e[0]?e[0].price:0}};T.length,Tt("Paid"),Tt("UnPaid"),Tt("Over Due"),Tt("Cancelled");return Object(Q.jsx)(R.a,{title:" Purchase List",children:Object(Q.jsxs)(l.a,{maxWidth:!t&&"lg",children:[Object(Q.jsx)(q.a,{heading:"Purchase List",links:[{name:"Dashboard",href:D.b.root},{name:"Purchase",href:D.b.purchase.root},{name:"Purchase List"}],action:Object(Q.jsx)(h.a,{variant:"contained",component:u.b,to:D.b.purchase.newPurchase,startIcon:Object(Q.jsx)(I.a,{icon:"eva:plus-fill"}),children:"New Purchase"})}),Object(Q.jsx)(d.a,{sx:{mb:5},children:Object(Q.jsx)(B.a,{children:Object(Q.jsxs)(p.a,{direction:"row",divider:Object(Q.jsx)(b.a,{orientation:"vertical",flexItem:!0,sx:{borderStyle:"dashed"}}),sx:{py:2},children:[Object(Q.jsx)(N.a,{title:"Total",total:Tt("all"),percent:At("all"),price:Wt("all"),icon:"ic:round-receipt",color:e.palette.info.main}),Object(Q.jsx)(N.a,{title:"Paid",total:Tt("Paid"),percent:At("Paid"),price:Wt("Paid"),icon:"eva:checkmark-circle-2-fill",color:e.palette.success.main}),Object(Q.jsx)(N.a,{title:"Unpaid",total:Tt("UnPaid"),percent:At("UnPaid"),price:Wt("UnPaid"),icon:"eva:clock-fill",color:e.palette.warning.main})]})})}),Object(Q.jsxs)(d.a,{children:[Object(Q.jsx)(E.b,{numSelected:Y.length,filterName:et,clearDate:function(){return Ot(null),void vt(null)},onFilterName:Nt,onDeleteProducts:function(){return function(t){var e=T.filter((function(e){return!t.includes(e.name)}));Z([]),A(e)}(Y)},startDate:ft,endDate:kt,placeholder:"Search Purchase",selecteStartdDate:function(t){return Ot(t)},selecteEnddDate:function(t){return vt(t)}}),Object(Q.jsx)(B.a,{children:Object(Q.jsx)(j.a,{sx:{minWidth:800},children:Object(Q.jsxs)(f.a,{children:[Object(Q.jsx)(E.a,{order:H,orderBy:st,headLabel:U,rowCount:T.length,numSelected:Y.length,onRequestSort:function(t){K(st===t&&"asc"===H?"desc":"asc")}}),Object(Q.jsxs)(O.a,{children:[T.map((function(t){var e=t._id,a=t.purchaseId,c=t.dateOfPurchase,n=(t.dealer,t.grandTotal),r=t.dealerDetails,i=t.paid,o=t.balance,u=t.due,s=t.paidStatus,l=-1!==Y.indexOf(a);return Object(Q.jsxs)(g.a,{hover:!0,tabIndex:-1,role:"checkbox",selected:l,"aria-checked":l,children:[Object(Q.jsx)(x.a,{padding:"checkbox",children:Object(Q.jsx)(k.a,{checked:l,onClick:function(){return function(t){var e=Y.indexOf(t),a=[];-1===e?a=a.concat(Y,t):0===e?a=a.concat(Y.slice(1)):e===Y.length-1?a=a.concat(Y.slice(0,-1)):e>0&&(a=a.concat(Y.slice(0,e),Y.slice(e+1))),Z(a)}(a)}})}),Object(Q.jsx)(x.a,{children:a}),Object(Q.jsx)(x.a,{style:{minWidth:160},children:Object(P.a)(c)}),Object(Q.jsx)(x.a,{children:r.name}),Object(Q.jsx)(x.a,{children:r.phone?r.phone:"----"}),Object(Q.jsx)(x.a,{children:u}),Object(Q.jsx)(x.a,{children:Object(w.a)(n)}),Object(Q.jsx)(x.a,{children:Object(w.a)(i)}),Object(Q.jsx)(x.a,{children:Object(w.a)(o)}),Object(Q.jsx)(x.a,{children:s}),Object(Q.jsx)(x.a,{align:"right",children:Object(Q.jsx)(E.c,{menu:"purchase",productId:e,onDelete:function(){return function(t){var e=T.filter((function(e){return e.id!==t}));Z([]),A(e)}(e)}})})]},e)})),Qt>0&&Object(Q.jsx)(g.a,{style:{height:53*Qt},children:Object(Q.jsx)(x.a,{align:"center",colSpan:10,children:"No Record"})})]}),Ut&&Object(Q.jsx)(O.a,{children:Object(Q.jsx)(g.a,{children:Object(Q.jsx)(x.a,{align:"center",colSpan:8,children:Object(Q.jsx)(v.a,{sx:{py:3},children:Object(Q.jsx)(L.a,{searchQuery:et})})})})})]})})}),Object(Q.jsx)(y.a,{rowsPerPageOptions:[5,10,25],component:"div",count:dt,rowsPerPage:rt,page:J,onPageChange:function(t,e){console.log("onPageChange",e),function(t){F(t)}(e)},onRowsPerPageChange:Et})]})]})})}}}]);
//# sourceMappingURL=59.bd58c605.chunk.js.map